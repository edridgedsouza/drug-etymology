<html>
    <head>
        <title>Drug Name Etymology</title>
        
        <!-- Ripped from https://github.com/dhg/Skeleton-->
        <meta charset="utf-8">
        <meta name="description" content="Drug Name Etymology based on INN stems">
        <meta name="author" content="Edridge D'Souza">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/skeleton.css">
        <style>
            li{
                margin: 0px 0;
            }
        </style>
        
        
        <script src='main.js'></script>
        <script>
            var stem_data;
            fetch('./stems.tsv')
                .then(response => response.text())
                .then(data => stem_data = data)
                .then(() => console.log(stem_data));

            function analyze() {
                var l = new Linguist(stem_data);

                var drugname = document.getElementById('dname').value;
                var out = document.getElementById("output");
                
                var out_text = l.explain(drugname);
                out.innerHTML = out_text; // Warning: technically not sanitized
            }
            

        </script>
    </head>

    <body>

        <div class='container'>
            <section style='margin-top: 5rem'>
                <div class="row">
                    <div class="twelve columns">
                        <h1 class='header'>Drug Etymology Search</h1>
                    </div>
                </div>
            </section>
            <div class="row">
                <div class="twelve columns">
                    Enter a drug name to guess possible etymologies based on the 2018 INN <a href="https://www.who.int/publications/i/item/who-emp-rht-tsn-2018-1">stem book</a>. Autocomplete based on 2021 WHO Essential Medicine <a href="https://www.who.int/publications/i/item/WHO-MHP-HPS-EML-2021.02">List</a>. If you like this tool and want to modify it, the code is available on my <a href="https://github.com/edridgedsouza/drug-etymology">GitHub</a>.
                    <br /><br />
                </div>
            </div>
            <div class="row">
                <div class="eight columns">
                    <input class='u-full-width' type="text" id="dname" name="dname" placeholder="Drug name">
                </div>
                <div class="two columns">
                    <button class='button-primary' id='analyze' onclick='analyze()'>Analyze</button>
                </div>
            </div>

            <div class="row">
                <div class="ten columns">
                    <div id='output'></div>
                </div>
            </div> 
        </div>



        <script>
            // https://www.w3schools.com/howto/howto_js_trigger_button_enter.asp
            var input = document.getElementById("dname");
            input.addEventListener("keyup", function(event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    document.getElementById("analyze").click();
                }
            });
        </script>
    </body>

</html>